---
const { completed, id } = Astro.props;
---

<div
  class='relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in'
>
  <input
    type='checkbox'
    name='toggle'
    data-id={id}
    id={`toggle-${id}`}
    checked={completed}
    class='toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer'
  />
  <label
    for={`toggle-${id}`}
    class='toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer'
  ></label>
</div>

<script>
  import { store } from '../../store';

  document.getElementsByName('toggle').forEach((element) => {
    element.addEventListener('click', () => {
      if (element.dataset.id) {
        store.toggle(+element.dataset.id);
      }
    });
  });
</script>
